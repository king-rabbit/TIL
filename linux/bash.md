# bash

## 별칭 붙이기 (alias)

- 복잡한 옵션을 붙인 명령어를 자주 사용할 경우 alias를 이용해 별칭을 붙여줄 수 있음.
- 이후 별칭을 호출하면 옵션이 반영된 명령어가 실행됨.
- 단, alias는 셸이 종료되면 삭제됨.

```bash
$ alias ls='ls -F' <- alias를 사용해 ls 입력 시 ls -F가 실행되게 함
```

- alias 확인하기 / 삭제하기 / 무효화하기

```bash
$ type ls <-  ls -F 의 별칭임이 출력됨
$ type cp <- alias가 아닌 경우 명령어 전체 경로가 출력됨
$ unalias ls <-  alias 삭제
$ command ls <- 별칭 지정된 상태에서 별칭 아닌 원래 명령어 실행
$ \ls <-  별칭 지정된 상태에서 별칭 아닌 원래 명령어 실행
```

## 옵션 설정하기

### set 명령어

- set -o <옵션 이름> : 옵션 활성화
- set +o <옵션이름> : 옵션 비활성화

```bash
$ set -o ignoreeof <- Ctrl + d 를 눌러도 셸이 종료되지 않게 함.
$ set -o noclobber <- 이미 존재하는 파일을 리다이렉트로 덮어쓰지 않음.
$ set -o noglob <- 경로 확장을 무효로 함. * 등을 셸에서 확장하지 않음.
```

### shopt 명령어

- shopt -s <옵션 이름> : 옵션 활성화
- shopt -u <옵션 이름> : 옵션 비활성화
- set 명령어에 지정할 수 있는 옵션과 shopt 명령어에 지정할 수 있는 옵션은 다름.

```bash
$ shopt -s autocd <- 디렉터리 이름을 입력하면 해당 디렉터리로 이동
$ shopt -s dotglob <- *나 ?를 사용한 경로 확장의 결과에 .로 시작되는 파일도 포함시킴
$ shopt -s cdspell <- cd 명령어 실행 시 디렉터리 이름의 오타를 자동 교정
$ shopt -s globstar <- 경로 확장으로 **라는 패턴을 사용하면 서브 디렉터리까지 포함한 모든 파일에 매치됨.
$ shopt -s histappend <- 배시를 종료할 때 히스토리 파일에 명령어 이력을 덮어쓰지 않고 추가함
```

## 셸 변수

### 변수 설정하기

- <변수명≥=<값>: 변수 설정하기. ( ‘=’ 앞뒤로 공백 있으면 안됨 )

```bash
$ echo $var1 <- 변수 값 확인
$ PS1='[\u]' <- PS1 변수는 셸의 프롬프트를 의미. \u는 사용자의 이름. 즉 프롬프트로 사용자 이름을 지정.
```

- 변수값에 활용할 수 있는 기호
    - \d : 현재 날짜(요일, 월, 일 형식)
    - \h : 서버의 호스트 이름
    - \H : 서버의 도메인 이름
    - \n : 개행문자(줄바꿈)
    - \t : HH:MM:SS 형태. 24시간 단위의 현재 시각.
    - \u : 사용자 이름
    - \w : 현재 디렉터리의 전체 경로 표시
    - \W : 현재 디렉터리의 전체 경로 중 마지막 디렉터리만 표시
    - \$ : 현재의 사용자가 root 사용자면 #, 아니면 $를 표시
    - \\ : \ 문자 자체를 표시

### PATH

- $PATH 변수에 디렉터리를 콜론(:)으로 구분해 설정 → 명령어 위치를 찾는 디렉터리로 저장

### LANG

- LANG은 언어, 나라를 특정하는 식별자인 locale값이 저장된 변수.

```bash
$ echo $LANG <- 현재 사용중인 로케일 확인
$ locale -a <- 시스템이 지원하는 로케일 확인
```

## 환경변수

- 외부 명령어와 내장 명령어
    - 외부 명령어: 파일 시스템에 실행 파일로 존재
    - 내장 명령어 : 셸 자체에 포함됨
    
    ```bash
    $ type set <- 쉘 내장이라고 뜸
    $ type cp <- 명령어 저장된 경로 출력
    ```
    
    - 외부 명령어는 셸 외부에서 실행되기 때문에 셸 변수를 참고할 수 없음!!
    - BUT 외부 명령어에서도 값을 참조할 수 있는 변수들이 있음. 이게 환경 변수!!

### printenv

- printenv : 셸에 설정된 환경 변수 출력

### export

- export : 환경 변수를 설정하는 명령어

```bash
$ LESS='--no-init'
$ export LESS <-셸 변수 LESS를 환경 변수로 설정. less 명령어가 LESS 라는 환경변수 값을 참조하므로 이렇게 환경변수를 설정하면 less 명령어 실행 시 해당 옵션이 적용됨.
```

## 배시 설정 파일

- 셸을 종료 후 다시 켜도 변수가 적용되도록 하려면 설정 파일을 수정해야 함.

### /etc/profile, ~/.profile, ~/.bashrc

- 배시는 시작되면서 설정 파일들을 읽음.
    - /etc/profile 읽음 → ~/.profile 읽음 → ~/.profile에서 ~/.bashrc를 읽도록 설정돼 ~/.bashrc를 읽음.
    - /etc/profile : 시스템 전체에 적용되는 설정 파일. 모든 사용자에게 적용됨.
    - ~/.profile : 사용자별 설정 파일. (~/.bashrc를 함께 실행)
    - 비로그인 셸로 배시가 기동된 경우에는 ~/.bashrc만 읽음.
    - ~/.profile은 로그인할 때만 읽히고, ~/.bashrc는 배시가 기동할 때마다 읽힘.
    - 로그인할 때 한번만 설정하면 되는 항목: ~/.profile에 기재
    - 배시를 기동할 때마다 설정해야 하는 항목: ~/.bashrc에 기재 (대부분 여기에 해당)

```bash
$ cp .bashrc .bashrc.org <- 다른 이름으로 백업하기. 또는 수정하기 이전에 별도의 셸을 기동해서 설정 파일을 복원.
```

### 설정 파일 읽기

- 설정파일은 vim으로 수정하면 됨.

```bash
$ vim ~/.bashrc
$ source ~/.bashrc <- 설정파일에 기대한 내용 반영해 실행
```

- bashrc 파일에 기재된 설정은 로그인할 때마다 실행됨
- 그 전에 반영하고 싶으면 source 명령어로 실행.
- source 명령어는 파일 내용을 읽어서 실행하는 명령어. 즉, 파일에 기재된 내용을 직접 커맨드 라인에서 실행하는 것과 같은 효과임.