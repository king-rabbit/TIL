# Process and Job

## 프로세스

- 명령어의 실체는 디스크에 있는 파일
- 셸에 명령어를 입력하면 커널이 해당 파일을 메모리에 올림 → CPU가 이를 실행
- 메모리 위에 올린 프로그램 = 프로세스
- 같은 프로그램이어도 각 프로세스는 별도의 메모리 영역을 가짐.
- 리눅스 커널은 각 프로세스에 프로세스 ID를 할당해 관리
- 새로운 프로세스(=자식 프로세스)는 기존의 프로세스(=부모 프로세스)를 기반으로 만들어짐.
    - ex. 셸에서 ls 명령어를 살행 → 부모 프로세스 = 셸, 자식 프로세스 = ls

### 프로세스 목록 표시하기 : ps

```bash
$ ps
```

- ps: 현재 실행 중인 프로세스 목록 출력
- 출력 시 나타나는 컬럼
    - PID : 프로세스 ID. 프로세스가 종료하기 전까지 바뀌지 않음.
    - TTY: 터미널. 터미널이 ?로 표시되면 해당 프로세스가 터미널에 접속되어 있지 않은 데몬임을 의미.
    - CMD : 실행한 명령어
- x 옵션: 다른 터미널에서 실행 중인 프로세스나 터미널과 무관하게 돌아가는 프로세스인 데몬 출력
    - ux 옵션: 사용자의 프로세스를 **상세하게** 출력
- f 옵션: 프로세스 간 부모와 자식 관계표시
    - 참고로 ps 명령어에는 -를 사용하지 않는 BSD 옵션이 주류로 사용되고 있음.
    
    ```bash
    $ ps xf
    ```
    
- a 옵션: 시스템을 위해 동작하는 프로세스들을 포함해 모든 프로세스를 출력하는 옵션
    
    ```bash
    $ ps ax
    ```
    
    - aux : 모든 프로세스를 **상세하게** 출력
    - auxww: aux 옵션의 출력 결과가 **화면에 잘리지 않도록** 출력

## 잡Job

- 셸에서 바라본 프로세스 처리 단위
- 셸의 커맨드 라인에 입력한 한 행이 곧 job 1개에 해당함.
- 복수의 명령어 입력 → 프로세스는 명령어 개수만큼, 잡은 1개만 생성
- 프로세스는 시스템 전체에 걸쳐 유니크한 PID가 할당되는 반면, 잡은 셸별로 관리됨.

```bash
$ jobs <- 현재 잡 목록 확인
$ jobs -l <- 프로세스 ID 함께 표시
```

- Ctrl + z : 잡을 정지시킴 → 다른 명령어 호출 가능

- **포그라운드**: 사용자의 입력을 받아들일 수 있는 잡의 상태. 정지 상태의 명령어를 다시 실행하려면 포그라운드로 되돌려야 함.

```bash
 $ fg %<잡 번호> <- 잡을 포그라운드로 전환
```

- **백그라운드**: 사용자가 조작할 수 없는 잡의 상태. 복사하기처럼 중간에 중지하지 않는 것이 좋은 경우에는 잡을 백그라운드에서 실행하는 것이 좋음.

```bash
$ bg %<잡 번호> <- 잡이 백그라운드에서 실행됨 
$ cp file1 file2 & <- '&'를 마지막에 추가하면 명령어가 처음부터 백그라운드에서 실행됨 
```

### 잡 종료하기

- 포그라운드 실행 중일 때 : Ctrl + c
- 백그라운드에서 실행 중일 때 : kill 명령어

```bash
$ kill %<잡 번호>
```

### 프로세스 종료하기

```bash
$ kill %<프로세스 ID>
```

- 잡과 마찬가지로 kill 명령어로 종료

### kill 명령어

- kill 명령어는 프로세스에게 시그널, 즉 메시지를 보내는 명령어.
- kill 명령어로 보낸 시그널에 따라 프로세스는 종료, 정지, 재기동 등의 처리를 수행

```bash
$ kill -<시그널 이름>
```

- 시그널 이름을 지정하지 않으면 기본값인 TERM(또는 시그널 고유 번호인 15)이 전송됨. TERM은 종료 시그널(terminate)임.
- Ctrl + z: TSTP, Ctrl + c: INT라는 시그널을 전송하는 단축키로 잡을 정지하거나 종료시킴.

```bash
$ kill -l <- 시그널 종류 확인
```

- SIGKILL 시그널은 프로세스에 전달되지 않고 리눅스 커널이 처리하는 유일한 시그널. 지정한 프로세스를 강제 종료하는 시그널임. 즉, TERM 시그널을 받아도 종료하지 않으면 이 시그널 하용.